import{j as C}from"./mui-d65b584a.js";import{u as he,a as fe,b as ve,c as ge,d as we,C as le,e as de,s as ae,Q as ue,L as be,S as ke,f as _e,D as ye}from"./index-6a8efd57.js";import{r as t,H as X,$ as Ae}from"./antd-87a612df.js";import{m as xe,P as Ce,s as Se}from"./auth-f5e9bdf2.js";function H(){return(H=Object.assign||function(e){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(e[f]=l[f])}return e}).apply(this,arguments)}function me(e,u){(u==null||u>e.length)&&(u=e.length);for(var l=0,f=new Array(u);l<u;l++)f[l]=e[l];return f}var ie=window;t.memo(function(e){var u=e.state,l=u===void 0?"":u,f=e.client_id,k=e.className,b=e.redirect_uri,_=e.scope,y=_===void 0?"profile":_,T=e.isOnlyGetToken,v=T!==void 0&&T,L=e.scope_data,N=L===void 0?{profile:{essential:!0}}:L,S=e.response_type,j=S===void 0?"token":S,x=e.children,i=e.onReject,c=e.onResolve,s=e.onLoginStart,d=t.useRef(null),h=t.useState(!1),I=h[0],A=h[1];t.useEffect(function(){!I&&r()},[I]),t.useEffect(function(){return function(){d.current&&d.current.remove()}},[]);var m=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),p=t.useCallback(function(g,E,D,Q,P){E===void 0&&(E="script");var R=g.createElement(E);R.id=D,R.src=Q,R.async=!0,R.defer=!0;var z=document.getElementsByTagName("script")[0];d.current=R,z&&z.parentNode&&z.parentNode.insertBefore(R,z),R.onload=P},[]),a=t.useCallback(function(g){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+g.access_token}}).then(function(E){return E.json()}).then(function(E){c({provider:"amazon",data:H({},E,g)})}).catch(function(E){i(E)}).finally(function(){}),Promise.resolve()}catch(E){return Promise.reject(E)}},[i,c]),n=t.useCallback(function(g){v?c({provider:"amazon",data:H({},g)}):a(g)},[a,c,v]),o=t.useCallback(function(g){i(g)},[i]),r=t.useCallback(function(){m()?A(!0):p(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){ie.amazon.Login.setClientId(f),A(!0)})},[m,f,p]),w=t.useCallback(function(){I&&(ie.amazon?(s&&s(),ie.amazon.Login.authorize({scope:y,scope_data:N,response_type:j,redirect_uri:b,state:l},function(g){g.error?o(g.error):n(g)})):(r(),i("Google SDK isn't loaded!")))},[r,y,l,i,N,I,o,s,b,j,n]);return X.createElement("div",{className:k,onClick:w},x)});var ce=window,je=t.memo(function(e){var u=e.appId,l=e.scope,f=l===void 0?"email,public_profile":l,k=e.state,b=k===void 0||k,_=e.xfbml,y=_===void 0||_,T=e.cookie,v=T===void 0||T,L=e.version,N=L===void 0?"v2.7":L,S=e.language,j=S===void 0?"en_EN":S,x=e.auth_type,i=x===void 0?"":x,c=e.className,s=e.onLoginStart,d=e.onReject,h=e.onResolve,I=e.redirect_uri,A=e.fieldsProfile,m=A===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":A,p=e.response_type,a=p===void 0?"code":p,n=e.return_scopes,o=n===void 0||n,r=e.isOnlyGetToken,w=r!==void 0&&r,g=e.children,E=t.useRef(null),D=t.useState(!1),Q=D[0],P=D[1],R=t.useState(!1),z=R[0],B=R[1];t.useEffect(function(){!Q&&Z()},[Q]),t.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var G=t.useCallback(function(O,Y){var W=O.createElement("script");W.id="facebook-jssdk",W.src="https://connect.facebook.net/en_EN/sdk.js";var U=O.getElementsByTagName("script")[0];U&&U.parentNode&&U.parentNode.insertBefore(W,U),Y()},[]),M=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),K=t.useCallback(function(O,Y){var W=window;W.fbAsyncInit=function(){W.FB&&W.FB.init(H({},O)),P(!0);var U=Y.getElementById("fb-root");U||((U=Y.createElement("div")).id="fb-root",Y.body.appendChild(U)),E.current=U}},[]),ee=t.useCallback(function(O){ce.FB.api("/me",{locale:j,fields:m},function(Y){h({provider:"facebook",data:H({},O,Y)})})},[m,j,h]),te=t.useCallback(function(O){console.log("🚀 ~ file: index.tsx:127 ~ response:",O),O.authResponse?w?h({provider:"facebook",data:H({},O.authResponse)}):ee(O.authResponse):d(O),B(!1)},[ee,w,d,h]),Z=t.useCallback(function(){M()?P(!0):G(document,function(){K({appId:u,xfbml:y,version:N,state:b,cookie:v,redirect_uri:I,response_type:a},document)})},[b,u,y,v,N,K,I,a,G,M]),$=t.useCallback(function(){Q&&!z&&(ce.FB?(B(!0),s&&s(),ce.FB.login(te,{scope:f,return_scopes:o,auth_type:i})):(Z(),d("Fb isn't loaded!"),B(!1)))},[Z,f,d,i,Q,s,z,o,te]);return X.createElement("div",{className:c,onClick:$},g)}),V="875c0462-6309-4ddf-9889-5227b1acc82c",ne=window;t.memo(function(e){var u=e.client_id,l=e.scope,f=l===void 0?"https://www.googleapis.com/auth/userinfo.profile":l,k=e.prompt,b=k===void 0?"select_account":k,_=e.typeResponse,y=_===void 0?"accessToken":_,T=e.ux_mode,v=e.className,L=v===void 0?"":v,N=e.login_hint,S=N===void 0?"":N,j=e.access_type,x=j===void 0?"online":j,i=e.onLoginStart,c=e.onReject,s=e.onResolve,d=e.redirect_uri,h=d===void 0?"/":d,I=e.auto_select,A=I!==void 0&&I,m=e.isOnlyGetToken,p=m!==void 0&&m,a=e.cookie_policy,n=a===void 0?"single_host_origin":a,o=e.hosted_domain,r=o===void 0?"":o,w=e.discoveryDocs,g=w===void 0?"":w,E=e.children,D=e.fetch_basic_profile,Q=D===void 0||D,P=t.useRef(null),R=t.useState(!1),z=R[0],B=R[1],G=t.useState(null),M=G[0],K=G[1];t.useEffect(function(){!z&&Y()},[z]),t.useEffect(function(){return function(){P.current&&P.current.remove()}},[]);var ee=t.useCallback(function(){return!!document.getElementById("google-login")},[]),te=t.useCallback(function(U,J,F,oe,pe){J===void 0&&(J="script");var q=U.createElement(J);q.id=F,q.src=oe,q.async=!0,q.defer=!0;var re=document.getElementsByTagName("script")[0];P.current=q,re&&re.parentNode&&re.parentNode.insertBefore(q,re),q.onload=pe},[]),Z=t.useCallback(function(U){if(y==="accessToken"){var J=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V,Authorization:"Bearer "+U.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:J}).then(function(F){return F.json()}).then(function(F){var oe=H({},U,F);s({provider:"google",data:oe})}).catch(function(F){c(F)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+U.credential,{method:"GET"}).then(function(F){return F.json()}).then(function(F){var oe=H({},U,F);s({provider:"google",data:oe})}).catch(function(F){c(F)})},[y,c,s]),$=t.useCallback(function(U){U&&x==="offline"||p?s({provider:"google",data:U}):Z(U)},[x,p,Z,s]),O=t.useCallback(function(U){c({provider:"google",data:U})},[c]),Y=t.useCallback(function(){ee()?B(!0):te(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var U={client_id:u,ux_mode:T},J=null;if(y==="idToken")ne.google.accounts.id.initialize(H({},U,{auto_select:A,prompt:"select_account",login_uri:h,callback:$,native_callback:$,error_callback:O}));else{var F=H({},U,{scope:f,prompt:b,login_hint:S,access_type:x,hosted_domain:r,redirect_uri:h,cookie_policy:n,discoveryDocs:g,immediate:!0,fetch_basic_profile:Q,callback:$,error_callback:O});J=x==="offline"?ne.google.accounts.oauth2.initCodeClient(F):ne.google.accounts.oauth2.initTokenClient(F)}J&&K(J),B(!0)})},[f,b,T,u,S,A,x,h,y,g,n,r,$,O,Q,te,ee]),W=t.useCallback(function(){z&&(ne.google?(i&&i(),M?x==="offline"?M.requestCode():M.requestAccessToken():ne.google.accounts.id.prompt()):(Y(),c("Google SDK isn't loaded!")))},[x,M,z,Y,i,c]);return X.createElement("div",{className:L,onClick:W},E)});t.memo(function(e){var u=e.state,l=u===void 0?"":u,f=e.scope,k=f===void 0?"repo,gist":f,b=e.client_id,_=e.client_secret,y=e.className,T=y===void 0?"":y,v=e.redirect_uri,L=e.allow_signup,N=L!==void 0&&L,S=e.isOnlyGetToken,j=S!==void 0&&S,x=e.isOnlyGetCode,i=x!==void 0&&x,c=e.children,s=e.onReject,d=e.onResolve,h=e.onLoginStart;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&o&&(localStorage.setItem("github",o),window.close())},[]);var I=t.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":V}}).then(function(o){return o.json()}).then(function(o){d({provider:"github",data:H({},o,n)})}).catch(function(o){s(o)})},[s,d]),A=t.useCallback(function(n){if(i)d({provider:"github",data:{code:n}});else{var o={code:n,state:l,redirect_uri:v,client_id:b,client_secret:_},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(w){return w.text()}).then(function(w){for(var g,E={},D=function(P,R){var z;if(typeof Symbol>"u"||P[Symbol.iterator]==null){if(Array.isArray(P)||(z=function(G,M){if(G){if(typeof G=="string")return me(G,void 0);var K=Object.prototype.toString.call(G).slice(8,-1);return K==="Object"&&G.constructor&&(K=G.constructor.name),K==="Map"||K==="Set"?Array.from(G):K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K)?me(G,void 0):void 0}}(P))){z&&(P=z);var B=0;return function(){return B>=P.length?{done:!0}:{done:!1,value:P[B++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(z=P[Symbol.iterator]()).next.bind(z)}(new URLSearchParams(w));!(g=D()).done;){var Q=g.value;E[Q[0]]=Q[1]}E.access_token?j?d({provider:"github",data:E}):I(E):s("no data")}).catch(function(w){s(w)})}},[l,s,I,d,b,v,_,i,j]),m=t.useCallback(function(n){var o=n.type,r=n.code,w=n.provider;try{return Promise.resolve(o==="code"&&w==="github"&&r&&A(r))}catch(g){return Promise.reject(g)}},[A]),p=t.useCallback(function(){window.removeEventListener("storage",p,!1);var n=localStorage.getItem("github");n&&(m({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[m]),a=t.useCallback(function(){h&&h(),window.addEventListener("storage",p,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+b+"&scope="+k+"&state="+l+"_github&redirect_uri="+v+"&allow_signup="+N,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[k,l,b,v,N,h,p]);return X.createElement("div",{className:T,onClick:a},c)});t.memo(function(e){var u=e.state,l=u===void 0?"":u,f=e.client_id,k=e.client_secret,b=e.className,_=e.redirect_uri,y=e.fields,T=y===void 0?"id,username,account_type,media_count":y,v=e.scope,L=v===void 0?"user_profile,user_media":v,N=e.response_type,S=N===void 0?"code":N,j=e.isOnlyGetCode,x=j!==void 0&&j,i=e.isOnlyGetToken,c=i!==void 0&&i,s=e.children,d=e.onReject,h=e.onResolve,I=e.onLoginStart;t.useEffect(function(){var o=new URL(window.location.href),r=o.searchParams.get("code"),w=o.searchParams.get("state");w!=null&&w.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var A=t.useCallback(function(o){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+T+"&access_token="+o.access_token,{method:"GET",headers:{"x-cors-grida-api-key":V}}).then(function(r){return r.json()}).then(function(r){h({provider:"instagram",data:H({},r,o)})}).catch(function(r){d(r)})},[T,d,h]),m=t.useCallback(function(o){if(x)h({provider:"instagram",data:{code:o}});else{var r={grant_type:"authorization_code",code:o,redirect_uri:_,client_id:f,client_secret:k},w=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:w,body:new URLSearchParams(r)}).then(function(g){return g.json()}).then(function(g){g.access_token?c?h({provider:"instagram",data:g}):A(g):d("no data")}).catch(function(g){d(g)}).finally(function(){})}},[d,h,A,f,_,k,x,c]),p=t.useCallback(function(o){var r=o.type,w=o.code,g=o.provider;try{return Promise.resolve(r==="code"&&g==="instagram"&&w&&m(w))}catch(E){return Promise.reject(E)}},[m]),a=t.useCallback(function(){window.removeEventListener("storage",a,!1);var o=localStorage.getItem("instagram");o&&(p({provider:"instagram",type:"code",code:o}),localStorage.removeItem("instagram"))},[p]),n=t.useCallback(function(){I&&I(),window.addEventListener("storage",a,!1);var o=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+S+"&client_id="+f+"&scope="+L+"&state="+l+"_instagram&redirect_uri="+_,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+o)},[L,l,f,_,I,S,a]);return X.createElement("div",{className:b,onClick:n},s)});t.memo(function(e){var u=e.tenant,l=u===void 0?"common":u,f=e.state,k=f===void 0?"":f,b=e.client_id,_=e.className,y=e.redirect_uri,T=e.scope,v=T===void 0?"profile openid email":T,L=e.response_type,N=L===void 0?"code":L,S=e.response_mode,j=S===void 0?"query":S,x=e.children,i=e.code_challenge,c=i===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":i,s=e.code_challenge_method,d=s===void 0?"plain":s,h=e.prompt,I=h===void 0?"select_account":h,A=e.isOnlyGetCode,m=A!==void 0&&A,p=e.isOnlyGetToken,a=p!==void 0&&p,n=e.onLoginStart,o=e.onReject,r=e.onResolve;t.useEffect(function(){var P=new URL(window.location.href),R=P.searchParams.get("code"),z=P.searchParams.get("state");z!=null&&z.includes("_microsoft")&&R&&(localStorage.setItem("microsoft",R),window.close())},[]);var w=t.useCallback(function(P){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+P.access_token}}).then(function(R){return R.json()}).then(function(R){r({provider:"microsoft",data:H({},R,P)})}).catch(function(R){o(R)})},[o,r]),g=t.useCallback(function(P){if(m)r({provider:"microsoft",data:{code:P}});else{var R={code:P,scope:v,client_id:b,redirect_uri:y,code_verifier:c,grant_type:"authorization_code"},z=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/token",{method:"POST",headers:z,body:new URLSearchParams(R)}).then(function(B){return B.json()}).then(function(B){B.access_token?a?r({provider:"microsoft",data:B}):w(B):o("no data")}).catch(function(B){o(B)})}},[v,l,o,w,b,r,y,c,m,a]),E=t.useCallback(function(P){var R=P.type,z=P.code,B=P.provider;try{return Promise.resolve(R==="code"&&B==="microsoft"&&z&&g(z))}catch(G){return Promise.reject(G)}},[g]),D=t.useCallback(function(){window.removeEventListener("storage",D,!1);var P=localStorage.getItem("microsoft");P&&(E({provider:"microsoft",type:"code",code:P}),localStorage.removeItem("microsoft"))},[E]),Q=t.useCallback(function(){n&&n(),window.addEventListener("storage",D,!1);var P=window.screen.width/2-225,R=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/authorize?client_id="+b+`
        &response_type=`+N+`
        &redirect_uri=`+y+`
        &response_mode=`+j+`
        &scope=`+v+`
        &state=`+k+`_microsoft
        &prompt=`+I+`
        &code_challenge=`+c+`
        &code_challenge_method=`+d,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+R+", left="+P)},[v,k,I,l,b,n,y,j,N,c,D,d]);return X.createElement("div",{className:_,onClick:Q},x)});t.memo(function(e){var u=e.state,l=u===void 0?"":u,f=e.scope,k=f===void 0?"r_liteprofile":f,b=e.client_id,_=e.client_secret,y=e.className,T=y===void 0?"":y,v=e.redirect_uri,L=e.response_type,N=L===void 0?"code":L,S=e.isOnlyGetCode,j=S!==void 0&&S,x=e.isOnlyGetToken,i=x!==void 0&&x,c=e.children,s=e.onLoginStart,d=e.onReject,h=e.onResolve;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&o&&(localStorage.setItem("linkedin",o),window.close())},[]);var I=t.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(o){return o.json()}).then(function(o){var r=H({},n);if(o.contents){var w=JSON.parse(o.contents);typeof n=="object"&&Object.entries(w).map(function(g){r[g[0]]=g[1]})}h({provider:"linkedin",data:r})}).catch(function(o){d(o)})},[d,h]),A=t.useCallback(function(n){if(j)h({provider:"linkedin",data:{code:n}});else{var o={code:n,grant_type:"authorization_code",redirect_uri:v,client_id:b,client_secret:_},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(w){return w.json()}).then(function(w){i?h({provider:"linkedin",data:w}):I(w)}).catch(function(w){d(w)})}},[d,h,b,I,v,_,j,i]),m=t.useCallback(function(n){var o=n.type,r=n.code,w=n.provider;try{return Promise.resolve(o==="code"&&w==="linkedin"&&r&&A(r))}catch(g){return Promise.reject(g)}},[A]),p=t.useCallback(function(){window.removeEventListener("storage",p,!1);var n=localStorage.getItem("linkedin");n&&(m({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[m]),a=t.useCallback(function(){s&&s(),window.addEventListener("storage",p,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+N+"&client_id="+b+"&scope="+k+"&state="+l+"_linkedin&redirect_uri="+v,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[s,p,N,b,k,l,v]);return X.createElement("div",{className:T,onClick:a},c)});t.memo(function(e){var u=e.state,l=u===void 0?"":u,f=e.scope,k=f===void 0?"boards:read,pins:read,user_accounts:read":f,b=e.client_id,_=e.client_secret,y=e.className,T=y===void 0?"":y,v=e.redirect_uri,L=e.isOnlyGetCode,N=L!==void 0&&L,S=e.isOnlyGetToken,j=S!==void 0&&S,x=e.children,i=e.onLoginStart,c=e.onReject,s=e.onResolve;t.useEffect(function(){var p=new URL(window.location.href),a=p.searchParams.get("code"),n=p.searchParams.get("state");n!=null&&n.includes("_pinterest")&&a&&(localStorage.setItem("pinterest",a),window.close())},[]);var d=t.useCallback(function(p){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+p.access_token,"x-cors-grida-api-key":V}}).then(function(a){return a.json()}).then(function(a){s({provider:"pinterest",data:H({},p,a)})}).catch(function(a){return c(a)})},[c,s]),h=t.useCallback(function(p){try{var a=function(){if(!N){var n={code:p,redirect_uri:v,grant_type:"authorization_code"},o=[];for(var r in n){var w=encodeURIComponent(r),g=encodeURIComponent(n[r]);o.push(w+"="+g)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(b+":"+_),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V},body:o}).then(function(E){return E.json()}).catch(function(E){return c(E)})).then(function(E){E.access_token&&(j?s({provider:"pinterest",data:E}):d(E))})}s({provider:"pinterest",data:{code:p}})}();return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[c,b,d,s,v,_,N,j]),I=t.useCallback(function(p){var a=p.type,n=p.code,o=p.provider;try{return Promise.resolve(a==="code"&&o==="pinterest"&&n&&h(n))}catch(r){return Promise.reject(r)}},[h]),A=t.useCallback(function(){window.removeEventListener("storage",A,!1);var p=localStorage.getItem("pinterest");p&&(I({provider:"pinterest",type:"code",code:p}),localStorage.removeItem("pinterest"))},[I]),m=t.useCallback(function(){i&&i(),window.addEventListener("storage",A,!1);var p=window.screen.width/2-225,a=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+b+"&scope="+k+"&state="+l+"_pinterest&redirect_uri="+v+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+a+", left="+p)},[k,l,b,v,i,A]);return X.createElement("div",{className:T,onClick:m},x)});t.memo(function(e){var u=e.client_id,l=e.className,f=l===void 0?"":l,k=e.redirect_uri,b=e.children,_=e.fields,y=_===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":_,T=e.state,v=T===void 0?"state":T,L=e.scope,N=L===void 0?"users.read%20tweet.read":L,S=e.isOnlyGetCode,j=S!==void 0&&S,x=e.isOnlyGetToken,i=x!==void 0&&x,c=e.onLoginStart,s=e.onReject,d=e.onResolve;t.useEffect(function(){var a=new URL(window.location.href),n=a.searchParams.get("code");a.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var h=t.useCallback(function(a){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+y,{method:"GET",headers:{Authorization:"Bearer "+a.access_token,"x-cors-grida-api-key":V}}).then(function(n){return n.json()}).then(function(n){d({provider:"twitter",data:H({},a,n.data)})}).catch(function(n){return s(n)})},[y,s,d]),I=t.useCallback(function(a){try{var n=function(){if(!j){var o=new URLSearchParams({code:a,redirect_uri:k,client_id:u,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V}}).then(function(r){return r.json()}).catch(function(r){return s(r)})).then(function(r){r.access_token&&(i?d({provider:"twitter",data:r}):h(r))})}d({provider:"twitter",data:{code:a}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},[s,h,d,u,k,j,i]),A=t.useCallback(function(a){var n=a.type,o=a.code,r=a.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&o&&I(o))}catch(w){return Promise.reject(w)}},[I]),m=t.useCallback(function(){window.removeEventListener("storage",m,!1);var a=localStorage.getItem("twitter");a&&(A({provider:"twitter",type:"code",code:a}),localStorage.removeItem("twitter"))},[A]),p=t.useCallback(function(){try{c&&c(),window.addEventListener("storage",m,!1);var a=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+u+"&redirect_uri="+k+"&scope="+N+"&state="+v+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+a),Promise.resolve()}catch(o){return Promise.reject(o)}},[N,v,u,c,k,m]);return X.createElement("div",{className:f,onClick:p},b)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var se=window;t.memo(function(e){var u=e.client_id,l=e.scope,f=l===void 0?"name email":l,k=e.className,b=k===void 0?"":k,_=e.onLoginStart,y=e.onReject,T=e.onResolve,v=e.redirect_uri,L=v===void 0?"/":v,N=e.children,S=t.useRef(null),j=t.useState(!1),x=j[0],i=j[1];t.useEffect(function(){!x&&h()},[x]),t.useEffect(function(){return function(){S.current&&S.current.remove()}},[]);var c=t.useCallback(function(){return!!document.getElementById("apple-login")},[]),s=t.useCallback(function(A,m,p,a,n){m===void 0&&(m="script");var o=A.createElement(m);o.id=p,o.src=a,o.async=!0,o.defer=!0;var r=document.getElementsByTagName("script")[0];S.current=o,r&&r.parentNode&&r.parentNode.insertBefore(o,r),o.onload=n},[]),d=t.useCallback(function(A){T({provider:"apple",data:A})},[T]),h=t.useCallback(function(){c()?i(!0):s(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){se.AppleID.auth.init({clientId:u,scope:f,redirectURI:L,state:"origin:web",usePopup:!0}),i(!0)})},[f,u,L,s,c]),I=t.useCallback(function(){try{if(!x)return Promise.resolve();var A=function(){if(se.AppleID){_&&_();var m=function(p,a){try{var n=Promise.resolve(se.AppleID.auth.signIn()).then(function(o){d(o)})}catch(o){return a(o)}return n&&n.then?n.then(void 0,a):n}(0,function(p){y({err:p})});if(m&&m.then)return m.then(function(){})}else h(),y("Apple SDK isn't loaded!")}();return Promise.resolve(A&&A.then?A.then(function(){}):void 0)}catch(m){return Promise.reject(m)}},[d,x,h,_,y]);return X.createElement("div",{className:b,onClick:I},N)});t.memo(function(e){var u=e.state,l=u===void 0?"":u,f=e.scope,k=f===void 0?"user.info.basic":f,b=e.client_key,_=e.className,y=_===void 0?"":_,T=e.redirect_uri,v=e.children,L=e.onResolve,N=e.onLoginStart;t.useEffect(function(){var i=new URL(window.location.href),c=i.searchParams.get("code"),s=i.searchParams.get("state");s!=null&&s.includes("_tiktok")&&c&&(localStorage.setItem("tiktok",c),window.close())},[]);var S=t.useCallback(function(i){var c=i.type,s=i.code,d=i.provider;try{return Promise.resolve(c==="code"&&d==="tiktok"&&s&&L({provider:"tiktok",data:{code:s}}))}catch(h){return Promise.reject(h)}},[L]),j=t.useCallback(function(){window.removeEventListener("storage",j,!1);var i=localStorage.getItem("tiktok");i&&(S({provider:"tiktok",type:"code",code:i}),localStorage.removeItem("instagram"))},[S]),x=t.useCallback(function(){N&&N(),window.addEventListener("storage",j,!1);var i=window.screen.width/2-225,c=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+b+"&scope="+k+"&state="+l+"_tiktok&redirect_uri="+T+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+c+", left="+i)},[k,l,b,T,N,j]);return X.createElement("div",{className:y,onClick:x},v)});const Ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIdSURBVHgBlVJLTBNRFL33zXRKIWCtEeInfhADMUabFHGnI240EdP4SXTjZ+NSjDtjqhJiXEoMG10oK3ChQiIh0WApC42YNlF0Q4ymZVlEWixgZzrv+t6QkWn5n2TezLlzz7v3vncQSjChN+qWgmEFoIUAamWMIXzjBHEi9rAmOjLqzkfnY/Lk4Sqe522EcANWxiPTx29t60/M2pvLherqvJbJh9cgBiI4zXKeaoercknv8D9AgqArKSnafyzerz1IFQVgBxDotvzHuXJsS+xj8v8I1O+tnXza8INnNWeo9zOFilO7Y7GMu/KUHvQTK98QiH5IueNovPV0QV69NDe4Ff5+DaRKK6wGFRUIga+A5S3jwPZMd1denygSN7f/ubesGllCBYL9Di9rmIouSmJ4d9kNiHqYm3OgKlgHCPhGeQvfxbNXBgbyOw8C/OwtTsOuYhGFhXn88wTH0BhUO3Jca43kQjBiVGcMjdePnulNL1Wx+T7VEM3EEWG73THCFfapsPnl5cxRKZYxv5bHN02vwpuWaFgUnu10xNIsYJjDtpVD3Wc7kEHrQpuQZICdwK04V8FCix0C8l0r+32+XssetzXEqX0oUnnHJvqQrubSgXeiyBFYBVr2BHl/XfgynRprSjxpNNF1Ohh6fq4NkSIrbSAs/cyc4zc/X+3LzPMSBHvCu1RQImKkfcSFyVCcFdG4MP0AkdIXv/gi5s7/Bzda1AAj2ek/AAAAAElFTkSuQmCC",Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGXSURBVHgBnVM7T8JQFD6nEIHE8HDQuhiILk7WhTgYA5OjuLmaOBkTH4l00YCLCSExqPwBf4DRwR1WExM7uLkwShxK0aWY9nhuES21EfAbes/9er57XvcieCCreoYgsIFAqwCYdEjEJyB6sGw6fS3Hnt3+2DPie3o8Eg6UiWAL/gJi1aSPI700YXwfIMShULDGURUYAgSkmaadbVUSLUkQ4bHAmb+YGnIM1gGs1NKstMhlXHWjohIKBQqOLeeNNKd17x/LSr2UEo3eTj40iiBhwfU/G+Tvtr8Y6j3xZL6dkxB22Uz2lyLlghw9DQPwJc54eS5lTfRgHv6PGZTVNnlITj2a9fOeO367ee9Qzs2JDBowJFgcd+/FOIM8mjvuw84PCQpnVeNVa5ai+4KbUo0K17sAnj4wp0mA9nU/CSJKhlfF5fhL3IV1IvGo6kR0ASOC0z8XY3ZuotmxC3yINoL8sRmJHgjLOUDcaQs6K2TT5UApR0Y9ugxFtMUevQ78nJNAUpEbSzzOTc5sfFptVwmhhWDfipLd/p/rxJeG5AxdkwAAAABJRU5ErkJggg==",Ie=()=>{const{width:e}=he(),[u,l]=t.useState(!1),f=3,k=fe(),b=ve(),_=ge(),{register:y,handleSubmit:T,formState:{errors:v},control:L}=we({defaultValues:{email:"",password:""}});t.useEffect(()=>{const c=new URLSearchParams(b.search).get("access_token");c?(k(le(!0)),k(de(c)),ae("token",c,f),ae("user_login",c),_("/")):u&&(ue.error("Không thể đăng nhập bằng Google!"),l(!1))},[b.search,u,k,_]);const N=async i=>{var c,s,d,h,I,A;try{const m=await Se(i.email,i.password);k(le(!0)),k(de((s=(c=m==null?void 0:m.data)==null?void 0:c.metadata)==null?void 0:s.tokens.accessToken)),ae("token",(h=(d=m==null?void 0:m.data)==null?void 0:d.metadata)==null?void 0:h.tokens.accessToken,f),ae("user_login",(A=(I=m==null?void 0:m.data)==null?void 0:I.metadata)==null?void 0:A.tokens.accessToken),_("/")}catch{ue.error("Đăng nhập thất bại! Vui lòng kiểm tra lại thông tin.")}},S=()=>{l(!0),window.location.href="http://localhost:8080/v1/api/auth/google/callback"},j=i=>{i.preventDefault()},x=()=>{_("/sign-up")};return C.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 4xl:grid-cols-[minmax(0,_1030px)_minmax(0,_1fr)]",children:[e>=1024&&C.jsxs("div",{className:"flex flex-col justify-center items-center lg:p-[60px]",children:[C.jsx(be,{imgClass:"w-[60px]",textClass:"text-[28px]"}),C.jsx("p",{className:"text-center tracking-[0.2px] font-semibold text-lg leading-6 max-w-[540px] my-7 mx-auto",children:"Discover trends, track your orders effortlessly, and enhance your shopping experience."}),C.jsx("img",{className:"max-w-[780px]",src:xe,alt:"media"})]}),C.jsx("div",{className:"bg-widget flex items-center justify-center w-full py-10 px-4 lg:p-[60px]",children:C.jsxs(ke,{className:"max-w-[460px] w-full",type:"slideUp",duration:400,delay:300,children:[C.jsxs("div",{className:"flex flex-col gap-2.5 text-center",children:[C.jsx("h1",{children:"Welcome back!"}),C.jsx("p",{className:"lg:max-w-[300px] m-auto 4xl:max-w-[unset]",children:"Explore our latest offerings and enjoy your shopping experience."})]}),C.jsxs("form",{className:"mt-5",onSubmit:T(N),children:[C.jsxs("div",{className:"flex flex-col gap-5",children:[C.jsxs("div",{className:"field-wrapper",children:[C.jsx("label",{htmlFor:"email",className:"field-label",children:"E-mail"}),C.jsx("input",{className:Ae("field-input",{"field-input--error":v.email}),id:"email",type:"text",placeholder:"Your E-mail address",...y("email",{required:!0,pattern:/^\S+@\S+$/i})})]}),C.jsx(_e,{name:"password",control:L,rules:{required:!0},render:({field:i})=>C.jsx(Ce,{id:"password",placeholder:"Your password",error:v.password,innerRef:i.ref,isInvalid:v.password,value:i.value,onChange:i.onChange})})]}),C.jsxs("div",{className:"flex flex-col items-center gap-6 mt-4 mb-10",children:[C.jsx("button",{className:"text-btn",onClick:j,children:"Forgot Password?"}),C.jsx("button",{className:"btn btn--primary w-full",type:"submit",children:"Log In"})]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"relative",children:[C.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-full h-[1px] bg-border"}),C.jsx("span",{className:"flex items-center justify-center relative z-10 w-11 h-[23px] m-auto bg-widget",children:"or"})]}),C.jsxs("div",{className:"grid grid-cols-1 gap-4 2xs:grid-cols-2 xs:gap-[30px] mt-[30px] mb-9",children:[C.jsxs("div",{className:"btn btn--social",onClick:S,children:[C.jsx("img",{className:"icon",src:Ee,alt:"Google"}),"Google"]}),C.jsxs(je,{className:"btn btn--social",children:[C.jsx("img",{className:"icon",src:Ne,alt:"Facebook"}),"Facebook"]})]}),C.jsxs("div",{className:"flex justify-center gap-2.5 leading-none",children:[C.jsx("p",{children:"Don’t have an account?"}),C.jsx("button",{className:"text-btn",onClick:x,children:"Sign Up"})]})]})]})})]})},ze=()=>C.jsxs(C.Fragment,{children:[C.jsx(ye,{title:"Login"}),C.jsx(Ie,{})]});export{ze as default};
