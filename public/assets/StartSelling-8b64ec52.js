import{j as e}from"./mui-d65b584a.js";import{d as f,Q as o,P as j}from"./index-6a8efd57.js";import{r as m}from"./antd-87a612df.js";import{c as N}from"./shop-bf157256.js";const b=()=>{var p,c;const[i,t]=m.useState(null),[n,d]=m.useState(null),{register:a,handleSubmit:h,formState:{errors:r}}=f({defaultValues:{shop_name:"",description:"",address:"",phone_number:"",email:""}}),u=async l=>{try{const s=new FormData;s.append("shop_name",l.shop_name),s.append("description",l.description),s.append("address",l.address),s.append("phone_number",l.phone_number),s.append("email",l.email),n&&s.append("file",n),console.log("Submitting formData:",s);const g=await N(s);o.success("Shop created successfully!",{autoClose:1e3})}catch(s){console.error("There was a problem with the API call:",s),o.error("Failed to create shop. Please try again.",{autoClose:1e3})}},x=l=>{const s=l.target.files[0];s?(t(URL.createObjectURL(s)),d(s)):(t(null),d(null))};return e.jsxs("div",{className:"card ",children:[e.jsx("h5",{className:"mb-[15px]",children:"Create Shop"}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("form",{className:"w-full",onSubmit:h(u),children:[e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block field-label mb-2.5",children:"Shop Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:x}),i&&e.jsx("div",{className:"mt-4 w-[150px] h-[150px]",children:e.jsx("img",{src:i,alt:"Shop Preview",className:"w-full h-auto object-cover"})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label text-lg pt-2",htmlFor:"shop_name",children:"Shop Name"}),e.jsx("input",{className:"field-input",id:"shop_name",placeholder:"Enter shop name",...a("shop_name",{required:!0})}),r.shop_name&&e.jsx("p",{className:"text-red-500",children:"Shop name is required"})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label text-lg pt-2",htmlFor:"description",children:"Description"}),e.jsx("textarea",{className:"field-input !h-[160px] !py-[15px] !overflow-y-auto",id:"description",placeholder:"Enter shop description",...a("description",{required:!0})}),r.description&&e.jsx("p",{className:"text-red-500",children:"Description is required"})]})]}),e.jsxs("div",{className:"w-full gap-5 pl-8 mt-[55px]",children:[e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label text-lg pt-2",htmlFor:"address",children:"Address"}),e.jsx("input",{className:"field-input",id:"address",placeholder:"Enter shop address",...a("address",{required:!0})}),r.address&&e.jsx("p",{className:"text-red-500",children:"Address is required"})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label text-lg pt-2",htmlFor:"phone_number",children:"Phone Number"}),e.jsx("input",{className:"field-input",id:"phone_number",placeholder:"Enter phone number",...a("phone_number",{required:!0})}),r.phone_number&&e.jsx("p",{className:"text-red-500",children:"Phone number is required"})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label text-lg pt-2",htmlFor:"email",children:"Email"}),e.jsx("input",{className:"field-input",id:"email",placeholder:"Enter shop email",...a("email",{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/})}),((p=r.email)==null?void 0:p.type)==="required"&&e.jsx("p",{className:"text-red-500",children:"Email is required"}),((c=r.email)==null?void 0:c.type)==="pattern"&&e.jsx("p",{className:"text-red-500",children:"Invalid email format"})]})]})]}),e.jsx("div",{className:"flex items-center justify-end xl:col-span-2",children:e.jsx("button",{className:"btn btn--primary w-full mt-5 md:w-fit md:px-[70px]",type:"submit",children:"Create Shop"})})]})})]})},y=()=>e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Start Selling"}),e.jsx(b,{})]});export{y as default};
